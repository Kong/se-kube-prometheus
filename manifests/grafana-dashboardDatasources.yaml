apiVersion: v1
kind: Secret
metadata:
  labels:
    app.kubernetes.io/component: grafana
    app.kubernetes.io/name: grafana
    app.kubernetes.io/part-of: kube-prometheus
    app.kubernetes.io/version: 11.1.0
  name: grafana-datasources
  namespace: monitoring
stringData:
  datasources.yaml: |-
    {
        "apiVersion": 1,
        "datasources": [
            {
                "access": "proxy",
                "editable": false,
                "name": "prometheus",
                "orgId": 1,
                "type": "prometheus",
                "url": "http://prometheus-k8s.monitoring.svc:9090",
                "version": 1
            },
            {
              "name": "Loki",
              "type": "loki",
              "access": "proxy",
              "editable": true,
              "uid": "loki",
              "url": "http://loki:3100",
              "jsonData": {
                "derivedFields": [
                  {
                    "datasourceUid": "jaeger",
                    "matcherRegex": "\"*-traceid\":\"([a-zA-Z0-9]*)\"",
                    "name": "gateway-traceId",
                    "url": "$${__value.raw}"
                  }
                ]
              }
            },
            {
              "name": "Jaeger",
              "type": "jaeger",
              "access": "proxy",
              "editable": true,
              "uid": "jaeger",
              "url": "http://jaeger-query",
              "jsonData": {
                "tracesToLogs": {
                  "datasourceUid": "loki",
                  "tags": [
                    "node_id"
                  ]
                }
              }
            }
        ]
    }
type: Opaque
